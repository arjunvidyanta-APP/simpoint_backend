spring.application.name=simpoint_enterprise
server.port=8081

# =================================================
# Database Configuration (MariaDB)
# =================================================
spring.datasource.url=jdbc:mariadb://31.97.62.2:3306/simpointDB?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&tcpKeepAlive=true
spring.datasource.username=simuser
spring.datasource.password=simpoint@2026
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# =================================================
# HikariCP Connection Pool (FINAL FIX)
# =================================================
spring.datasource.hikari.pool-name=SimpointHikariPool
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2

# Idle connection timeout (5 minutes)
spring.datasource.hikari.idle-timeout=300000

# Max connection lifetime (15 minutes)
spring.datasource.hikari.max-lifetime=900000

# Keep connection alive (5 minutes)
spring.datasource.hikari.keepalive-time=300000

spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.auto-commit=true


# =================================================
# JPA / Hibernate
# =================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false

spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.generate_statistics=false

# =================================================
# Logging (DB & Pool Debugging)
# =================================================
logging.level.com.zaxxer.hikari=WARN
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# =================================================
# Actuator (Health Check)
# =================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# =================================================
# Embedded Tomcat Tuning
# =================================================
server.tomcat.max-threads=200
server.tomcat.accept-count=100
server.tomcat.connection-timeout=20000
